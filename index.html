<!DOCTYPE html>
<!-- This is based on DillingerLee's great template here:
https://github.com/Team-Code/KA_Offline -->
<html>
 <head>
    <title>Processing.JS inside Webpages: Template</title>
</head>
 <body>
    <p align="center">
	<!--This draws the Canvas on the webpage -->
      <canvas id="mycanvas"></canvas>
    </p>
 </body>

 <!-- Run all the JavaScript stuff -->
 <!-- Include the processing.js library -->
 <!-- See https://khanacademy.zendesk.com/hc/en-us/articles/202260404-What-parts-of-ProcessingJS-does-Khan-Academy-support- for differences -->
 <script src="https://cdn.jsdelivr.net/processing.js/1.4.8/processing.min.js"></script>

 <script>
    var sketchProc = function(processingInstance) {
     with (processingInstance) {
        size(400, 400);
        frameRate(30);

        // ProgramCodeGoesHere

var Car = function() {
    this.position = new PVector(width/2, height/2);
    this.velocity = new PVector(0, 0);
    this.acceleration = new PVector(0, 0);
};

Car.prototype.update = function() {
    this.velocity.add(this.acceleration);
        if (this.velocity.x<0)
    {
        this.velocity.set(0,0);
    }
    this.velocity.limit(10);
    this.position.add(this.velocity);



};

Car.prototype.display = function() {
    stroke(0);
    strokeWeight(2);
    fill(255, 0, 0);
    rect(this.position.x-52, this.position.y-59, 60, 60);
    rect(this.position.x-74, this.position.y-30, 100, 31);
    fill(92, 92, 92);
    ellipse(this.position.x, this.position.y, 30, 26);
    ellipse(this.position.x-50, this.position.y, 30, 30);
};

Car.prototype.checkEdges = function() {
    if (this.position.x > width) {
        this.position.x = 0;
    }
    else if (this.position.x < 0) {
        this.position.x = width;
    }
};

//Motorcycle

var Bike = function() {
    this.position = new PVector(width/2, height/2);
    this.velocity = new PVector(0, 0);
    this.acceleration = new PVector(0, 0);
};

Bike.prototype.update = function() {
    this.velocity.add(this.acceleration);
        if (this.velocity.x<0)
    {
        this.velocity.set(0,0);
    }
    this.velocity.limit(10);
    this.position.add(this.velocity);



};

Bike.prototype.display = function() {
    stroke(0);
    strokeWeight(2);
    fill(0, 98, 255);
    rect(this.position.x-52, this.position.y-59, 60, 60);
    rect(this.position.x-74, this.position.y-30, 100, 31);
    fill(92, 92, 92);
    ellipse(this.position.x, this.position.y, 30, 26);
    ellipse(this.position.x-50, this.position.y, 30, 30);
};

Bike.prototype.checkEdges = function() {
    if (this.position.x > width) {
        this.position.x = 0;
    }
    else if (this.position.x < 0) {
        this.position.x = width;
    }


};

//Draw

var car = new Car();
var bike = new Bike();

draw = function() {
    background(237, 237, 237);
    car.update();
    car.checkEdges();
    car.display();
    bike.update();
    bike.checkEdges();
    bike.display();

        if (keyIsPressed && keyCode===39)
    {
       car.acceleration.set(0.09, 0);
       bike.acceleration.set(0.05, 0);
    }
    else if (keyIsPressed && keyCode===37)
    {
        car.acceleration.set(-0.09*2, 0);
        bike.acceleration.set(-0.05*2, 0);
    }

    else  {
        car.acceleration.set(0, 0);
        bike.acceleration.set(0, 0);
    }

    if (keyIsPressed && keyCode===108)
    {

    }
};
    }};

    // Get the canvas that Processing-js will use
    var canvas = document.getElementById("mycanvas");
    // Pass the function sketchProc (defined in myCode.js) to Processing's constructor.
    var processingInstance = new Processing(canvas, sketchProc);
 </script>

</html>
